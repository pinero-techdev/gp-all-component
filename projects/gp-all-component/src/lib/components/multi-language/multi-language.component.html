<p-toast life="5000"></p-toast>
<div class="ta-center">
    <button
        pButton
        type="button"
        icon="pi pi-globe"
        class="ui-button-rounded"
        (click)="initTranslations()"
    >
    </button>
</div>

<p-dialog
    [(visible)]="showTranslations"
    header="Mantenimiento traducciones - {{ description }}"
    modal="modal"
    [style]="{ width: '1000px', minHeight: '600px' }"
    appendTo="body"
>
    <div class="ui-grid ui-grid-responsive ui-grid-pad">
        <div *ngIf="translations" class="ui-grid-col-12">
            <div class="ui-grid-row" *ngFor="let t of translations">
                <div
                    class="ui-md-1 bandera bandera-{{ t.langCountry.toLowerCase() }}"
                    *ngIf="t.langCountry != null"
                    pTooltip="{{ t.langCountry }}"
                    tooltipPosition="top"
                >
                </div>
                <div class="ui-md 1 bandera sin-bandera" *ngIf="t.langCountry == null"> </div>
                <div [class.ui-md-10]="isEditing" [class.ui-md-11]="!isEditing">
                    <span class="md-inputfield padding-1 full-width">
                        <input
                            type="text"
                            pInputText
                            class="ui-inputtext ui-corner-all full-width large"
                            *ngIf="!isEditing || !hasHTMLContent(t.langCountryTranslation)"
                            [(ngModel)]="t.langCountryTranslation"
                        />
                        <input
                            type="text"
                            *ngIf="hasHTMLContent(t.langCountryTranslation) && isEditing"
                            class="ui-inputtext ui-corner-all full-width large ta-center"
                            disabled="true"
                            value="*****     CONTIENE HTML -  PULSE BOTÓN PARA EDITAR     ****"
                        />
                    </span>
                </div>
                <div class="ui-md-1" *ngIf="isEditing">
                    <button
                        pButton
                        type="button"
                        label="HTML"
                        class="ui-button-raised ui-button-success full-width"
                        [class.contiene-html]="hasHTMLContent(t.langCountryTranslation)"
                        (click)="showEditorHTMLDialog(t)"
                        icon="pi pi-pencil"
                    >
                    </button>
                </div>
            </div>
        </div>
        <gp-loading-indicator *ngIf="!translations" style="width:100%;"></gp-loading-indicator>
        <p-footer *ngIf="translations && showTranslations">
            <div class="ui-grid-row padding-1">
                <div class="ui-grid-col-8"></div>
                <div class="ui-grid-col-2">
                    <button
                        pButton
                        type="button"
                        label="Aceptar"
                        class="ui-button-raised full-width"
                        (click)="save()"
                        icon="pi pi-check"
                        [disabled]="working"
                    >
                    </button>
                </div>
                <div class="ui-grid-col-2">
                    <button
                        pButton
                        type="button"
                        label="Salir"
                        class="ui-button-raised full-width"
                        (click)="hideTranslations()"
                        icon="pi pi-times"
                    >
                    </button>
                </div>
            </div>
        </p-footer>
    </div>
</p-dialog>

<p-dialog
    [(visible)]="showHTMLEditor"
    header="Traducción - {{ currentLanguageHTML }}"
    modal="modal"
    [style]="{ width: '1000px' }"
    responsive="true"
>
    <div class="ui-grid ui-grid-responsive ui-grid-pad">
        <div class="ui-grid-col-12">
            <div class="ui-grid-row">
                <p-editor
                    [(ngModel)]="currentTextHTML"
                    [style]="{ height: '300px', width: '970px' }"
                >
                    <p-header>
                        <span class="ql-format-group">
                            <span title="Bold" class="ql-format-button ql-bold">
                                <button class="ql-bold" aria-label="Bold"></button>
                            </span>
                            <span class="ql-format-separator"></span>
                            <span title="Italic" class="ql-format-button ql-italic">
                                <button class="ql-italic" aria-label="Italic"></button>
                            </span>
                            <span class="ql-format-separator"></span>
                            <span title="Underline" class="ql-format-button ql-underline">
                                <button class="ql-underline" aria-label="Underline"></button>
                            </span>
                            <span class="ql-format-separator"></span>
                            <span title="Strikethrough" class="ql-format-button ql-strike"></span>
                        </span>
                    </p-header>
                </p-editor>
            </div>
        </div>
        <p-footer>
            <div class="ui-grid-row padding-1">
                <div class="ui-grid-col-8"></div>
                <div class="ui-grid-col-2">
                    <button
                        pButton
                        type="button"
                        label="Guardar"
                        icon="pi pi-check"
                        class="ui-button-raised full-width"
                        (click)="saveHTML()"
                        [disabled]="working"
                    ></button>
                </div>
                <div class="ui-grid-col-2">
                    <button
                        pButton
                        type="button"
                        label="Salir"
                        icon="pi pi-times"
                        class="ui-button-raised full-width"
                        (click)="closeHTMLEditor()"
                    ></button>
                </div>
            </div>
        </p-footer>
    </div>
</p-dialog>
